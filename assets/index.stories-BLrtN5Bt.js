import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as c}from"./iframe-Dx1vcyoD.js";import"./preload-helper-PPVm8Dsz.js";class x{upload;inputFile;callback;constructor(a){this.upload=a?.ref?.current,this.inputFile=this.upload.querySelector(".upload-input"),this.callback=a.callback,this.handle()}handle=()=>{this.inputFile.addEventListener("change",()=>{this.createImg()})};init=()=>{};createImg=()=>{for(var a=this,l=this.inputFile.files,t=0,g=l.length;t<g;t++){var h=l[t].type.replace(/image\//,""),o=new FileReader,s=document.getElementById("createImgCanvas"),p=s.getContext("2d"),d;o.readAsDataURL(l[t]),o.onloadend=function(){var r=new Image,f=this.result;r.src=f,r.onload=function(){s.width=r.width,s.height=r.height,p.drawImage(r,0,0,r.width,r.height),d=s.toDataURL("image/"+h,.9),a.callback&&a.callback(d)}}}}}function u(n){const{render:a,callback:l}=n,t=c.useRef(null);return c.useEffect(()=>{new x({...n,ref:t,callback:l})},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{ref:t,className:"upload-container",children:[e.jsx("label",{className:"upload-label",htmlFor:"xFile","data-name":"insertimage",children:a||"+"}),e.jsx("input",{className:"upload-input",type:"file",id:"xFile",multiple:!0,accept:"image/jpg,image/png,image/jpeg",title:"添加图片"}),e.jsx("canvas",{id:"createImgCanvas",style:{display:"none"}})]})})}u.__docgenInfo={description:"",methods:[],displayName:"Page"};function m(){const[n,a]=c.useState(),l=t=>{a(t)};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"文件上传 "}),e.jsx("h3",{children:"演示"}),e.jsx(u,{callback:l}),e.jsx("div",{children:e.jsx("img",{src:n,alt:""})})]})}m.__docgenInfo={description:"",methods:[],displayName:"Page"};const k={component:m},i={args:{backgroundColor:"#000000",label:"label"}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    backgroundColor: "#000000",
    label: "label"
  }
}`,...i.parameters?.docs?.source}}};const F=["Default"];export{i as Default,F as __namedExportsOrder,k as default};
