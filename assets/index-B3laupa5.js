import{j as s,L as u,o as d,u as g,m as _,S as m,n as p}from"./index-Da1paVyg.js";function x(){return s.jsx(s.Fragment,{children:s.jsx(u,{to:"/",children:"没有权限访问，Go Login"})})}const j=({authority:e,currentAuthority:n})=>{if(!e)return!0;if(Array.isArray(e)){if(Array.isArray(n)){if(n.some(r=>e.includes(r)))return!0}else if(e.includes(n))return!0;return!1}if(typeof e=="string"){if(Array.isArray(n)){if(n.some(r=>e===r))return!0}else if(e===n)return!0;return!1}if(typeof e=="function"){const r=e(n);return r instanceof Promise?"处理中。。。":!!r}throw new Error("啥也不是！")},w={},{VITE_OAUTH_OSLIU:L}=w;function v(e){var l;const{children:n}=e,r=g(),t=_(p,r),{UserinfoStore:{userinfo:i}}=m,a=t==null?void 0:t.find(o=>o.pathname===r.pathname),c=t==null?void 0:t.some(o=>{const f=o==null?void 0:o.route;return!j({authority:f==null?void 0:f.authority,currentAuthority:i==null?void 0:i.authority})});if(c&&((l=a==null?void 0:a.route)==null?void 0:l.authority)==="user"){const{href:o}=window.location;return window.location.href=`${L}/user/login?ref_page=`+o,s.jsx(s.Fragment,{})}else return s.jsx(s.Fragment,{children:!(i!=null&&i.loading)&&c?s.jsx(x,{}):n})}const E=d(v);export{E as default};
