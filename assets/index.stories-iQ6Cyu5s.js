import{j as r}from"./jsx-runtime-u17CrQMm.js";import{r as o}from"./iframe-ahbmcfaX.js";import"./preload-helper-PPVm8Dsz.js";class p{slider;sliderProgress;bufferProgress;sliderBtn;onMousedownChange;onMouseupChange;onMoveChange;min;radius;max;pointX;progress;animation;vertical;reverse;callback;constructor(e){this.slider=e?.ref?.current,this.sliderProgress=this.slider.querySelector(".progress"),this.bufferProgress=this.slider.querySelector(".buffer-progress"),this.sliderBtn=this.slider.querySelector(".slider-btn"),this.onMousedownChange=e.onMousedownChange,this.onMouseupChange=e.onMouseupChange,this.onMoveChange=e.onMoveChange,this.init(e),this.handles(),this.initMove()}init(e){this.radius=this.sliderBtn.getBoundingClientRect().width,this.min=0,this.max=100,this.pointX=e?.pointX??30,this.progress=0,this.animation=e?.animation||"effect2",this.vertical=e?.vertical,this.reverse=e?.reverse,this.callback=e?.callback,this.reverse?this.slider.style.transform="rotate(180deg)":this.slider.style.transform="rotate(0deg)",this.sliderProgress.style.height=this.slider.getBoundingClientRect().height+"px",this.bufferProgress.style.height=this.slider.getBoundingClientRect().height+"px"}handles(){this.slider.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault(),this.clickMove(e),this.onMousedown()})}rangeValue(e,s,t){return e>s&&e<t?e:e<=s?s:t}onMousedown=()=>{let e=this;function s(t){e.onMousemove(t)}document.addEventListener("mousemove",s),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",s),e.onMouseup()}),this.sliderBtn.style.opacity=.5,this.onMousedownChange&&this.onMousedownChange()};onMousemove=e=>{this.clickMove(e)};onMouseup=()=>{this.onMouseupChange&&this.onMouseupChange()};onSize(){}initMove(e){const s=this.slider.getBoundingClientRect().width||100,t=this.slider.getBoundingClientRect().height||100,i=e!=null?e/100:this.pointX/100;this.vertical?this.reverse?this.circleMove(t-this.radius-i*(t-this.radius)):this.circleMove(i*(t-this.radius)):this.reverse?this.circleMove(s-this.radius-i*(s-this.radius)):this.circleMove(i*(s-this.radius))}clickMove(e){const s=e.clientX,t=e.clientY,i=this.slider.getBoundingClientRect().x,n=this.slider.getBoundingClientRect().y,l=s-i-this.radius/2,a=t-n-this.radius/2,h=this.slider.getBoundingClientRect().width,m=this.slider.getBoundingClientRect().height,v=this.rangeValue(l,0,h-this.radius),R=this.rangeValue(a,0,m-this.radius);if(this.vertical){this.circleMove(a);const{rangeRatioReal:c}=this[this.animation](R);this.onMoveChange&&this.onMoveChange(c)}else{this.circleMove(l);const{rangeRatioReal:c}=this[this.animation](v);this.onMoveChange&&this.onMoveChange(c)}}circleMove(e){const s=this.slider.getBoundingClientRect().width,t=this.slider.getBoundingClientRect().height,i=this.rangeValue(e,0,s-this.radius),n=this.rangeValue(e,0,t-this.radius),l=i/s*100,a=n/t*100;this.vertical?(this.reverse?(this.sliderBtn.style.bottom=a+"%",this.sliderBtn.style.left="0"):(this.sliderBtn.style.top=a+"%",this.sliderBtn.style.left="0"),this.progressMove(n)):(this.reverse?(this.sliderBtn.style.right=l+"%",this.sliderBtn.style.top="0"):(this.sliderBtn.style.left=l+"%",this.sliderBtn.style.top="0"),this.progressMove(i))}progressMove(e){const{rangeRatio:s,rangeRatioReal:t}=this[this.animation](e);this.vertical?this.reverse?(this.sliderProgress.style.width="100%",this.sliderProgress.style.height=100-s+"%"):(this.sliderProgress.style.width="100%",this.sliderProgress.style.height=s+"%"):this.reverse?this.sliderProgress.style.width=100-s+"%":this.sliderProgress.style.width=s+"%",this.callback&&this.callback(this.reverse?100-t:t)}bufferMove=e=>{this.vertical?(this.bufferProgress.style.left="0",this.bufferProgress.style.top="0",this.bufferProgress.style.width="100%",this.bufferProgress.style.height=this.rangeValue(e,0,100)+"%"):(this.bufferProgress.style.left="0",this.bufferProgress.style.top="0",this.bufferProgress.style.width=this.rangeValue(e,0,100)+"%",this.bufferProgress.style.height="100%")};effect1=e=>{const s=this.slider.getBoundingClientRect().width||100,t=this.slider.getBoundingClientRect().height||100;let i=e+this.radius/2,n=e+this.radius/2;i+this.radius/2>=s?i=s:i<=this.radius/2&&(i=0),n+this.radius/2>=t?n=t:n<=this.radius/2&&(n=0);const l=i/s*100,a=n/t*100,h=e/(s-this.radius)*100,m=e/(t-this.radius)*100,v=this.rangeValue(l,this.min,this.max),R=this.rangeValue(a,this.min,this.max),c=this.rangeValue(h,this.min,this.max),M=this.rangeValue(m,this.min,this.max);return this.vertical?{rangeRatio:R,rangeRatioReal:M}:{rangeRatio:v,rangeRatioReal:c}};effect2=e=>{const s=this.slider.getBoundingClientRect().width||100,t=this.slider.getBoundingClientRect().height||100,i=e/(s-this.radius)*100,n=e/(t-this.radius)*100,l=this.rangeValue(i,this.min,this.max),a=this.rangeValue(n,this.min,this.max);return this.vertical?{rangeRatio:a,rangeRatioReal:a}:{rangeRatio:l,rangeRatioReal:l}}}function g(d){const{id:e,className:s,bufferValue:t=0,defaultValue:i}=d,n=o.useRef(null),[l,a]=o.useState({});return o.useEffect(()=>{const h=new p({...d,ref:n});a(h)},[]),o.useEffect(()=>{l?.initMove&&l?.initMove(i)},[i]),o.useEffect(()=>{l?.bufferMove&&l?.bufferMove(t)},[t]),r.jsx(r.Fragment,{children:r.jsxs("div",{id:e,ref:n,className:"slider "+s,children:[r.jsxs("div",{className:"slider-progress",children:[r.jsx("div",{className:"progress"}),r.jsx("div",{className:"buffer-progress"})]}),r.jsx("div",{className:"slider-btn"})]})})}g.__docgenInfo={description:"",methods:[],displayName:"Page"};const x="_slider1_n8jhn_1",y="_slider3_n8jhn_19",u={slider1:x,"slider-group":"_slider-group_n8jhn_14",slider3:y};function b(){const[d,e]=o.useState("");let[s,t]=o.useState(0),[i]=o.useState(0),[n]=o.useState(0),[l]=o.useState(0);o.useEffect(()=>{setInterval(()=>{t(s+=1)},300)},[]);const a=h=>{e(h)};return r.jsxs(r.Fragment,{children:[r.jsx("h1",{children:"滑动条"}),r.jsx("h3",{children:"演示"}),r.jsxs("p",{children:["回调结果：",d]}),r.jsx("h2",{children:"动画效果1"}),r.jsx(g,{pointX:s,className:u.slider1,animation:"effect2",callback:a,bufferValue:s}),r.jsx("h2",{children:"动画效果2"}),r.jsx(g,{reverse:!0,className:u.slider1,animation:"effect1",callback:a,bufferValue:i}),r.jsx("h2",{children:"垂直的"}),r.jsxs("div",{className:u["slider-group"],children:[r.jsx(g,{id:"Slider3",vertical:!0,className:u.slider3,animation:"effect1",callback:a,bufferValue:n}),r.jsx(g,{vertical:!0,reverse:!0,className:u.slider3,animation:"effect2",callback:a,bufferValue:l})]})]})}b.__docgenInfo={description:"",methods:[],displayName:"Page"};const P={component:b},f={args:{backgroundColor:"#000000",label:"label"}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {
    backgroundColor: "#000000",
    label: "label"
  }
}`,...f.parameters?.docs?.source}}};const j=["Default"];export{f as Default,j as __namedExportsOrder,P as default};
