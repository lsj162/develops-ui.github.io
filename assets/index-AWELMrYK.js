var x=Object.defineProperty;var f=(l,e,a)=>e in l?x(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a;var c=(l,e,a)=>f(l,typeof e!="symbol"?e+"":e,a);import{r as s,j as t}from"./index-Dq9attYf.js";class p{constructor(e){c(this,"upload");c(this,"inputFile");c(this,"callback");c(this,"handle",()=>{this.inputFile.addEventListener("change",()=>{this.createImg()})});c(this,"init",()=>{});c(this,"createImg",()=>{for(var e=this,a=this.inputFile.files,i=0,h=a.length;i<h;i++){var o=a[i].type.replace(/image\//,""),d=new FileReader,r=document.getElementById("createImgCanvas"),g=r.getContext("2d"),u;d.readAsDataURL(a[i]),d.onloadend=function(){var n=new Image,m=this.result;n.src=m,n.onload=function(){r.width=n.width,r.height=n.height,g.drawImage(n,0,0,n.width,n.height),u=r.toDataURL("image/"+o,.9),e.callback&&e.callback(u)}}}});var a;this.upload=(a=e==null?void 0:e.ref)==null?void 0:a.current,this.inputFile=this.upload.querySelector(".upload-input"),this.callback=e.callback,this.handle()}}function j(l){const{render:e,callback:a}=l,i=s.useRef(null);return s.useEffect(()=>{new p({...l,ref:i,callback:a})},[]),t.jsx(t.Fragment,{children:t.jsxs("div",{ref:i,className:"upload-container",children:[t.jsx("label",{className:"upload-label",htmlFor:"xFile","data-name":"insertimage",children:e||"+"}),t.jsx("input",{className:"upload-input",type:"file",id:"xFile",multiple:!0,accept:"image/jpg,image/png,image/jpeg",title:"添加图片"}),t.jsx("canvas",{id:"createImgCanvas",style:{display:"none"}})]})})}function F(){const[l,e]=s.useState(),a=i=>{e(i)};return t.jsxs(t.Fragment,{children:[t.jsx("h1",{children:"文件上传 "}),t.jsx("h3",{children:"演示"}),t.jsx(j,{callback:a}),t.jsx("div",{children:t.jsx("img",{src:l,alt:""})})]})}export{F as default};
