var x=Object.defineProperty;var v=(n,t,e)=>t in n?x(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var a=(n,t,e)=>v(n,typeof t!="symbol"?t+"":t,e);import{r as g,j as s}from"./index-Bd_Oaf5-.js";import{$ as u}from"./event-BuLzmr3F.js";const p={Cubic:{easeIn:function(n,t,e,i){return e*(n/=i)*n*n+t},easeOut:function(n,t,e,i){return e*((n=n/i-1)*n*n+1)+t},easeInOut:function(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n+t:e/2*((n-=2)*n*n+2)+t}}};var f=["https://bnetcmsus-a.akamaihd.net/cms/gallery/vp/VPXLK8LEZIF51516929079173.jpg","https://bnetcmsus-a.akamaihd.net/cms/gallery/tt/TT1I2PMCERZS1518117043081.jpg","https://bnetcmsus-a.akamaihd.net/cms/page_media/6r/6RM2X0ZS3UIA1509731407458.jpg"];class b{constructor(t){a(this,"id");a(this,"current");a(this,"data");a(this,"dataLen");a(this,"offsetLeft");a(this,"container");a(this,"fullWidth");a(this,"timer");this.id=t.id||"",this.current=t.props.current||0,this.data=f||[{},{},{}],this.dataLen=this.data.length,this.offsetLeft=0,this.init()}init(){this.container=document.querySelector("#"+this.id),this.container.innerHTML="",this.fullWidth=this.container.getBoundingClientRect().width,this.SteeringWheel(),this.dotInit(),this.content(),this.handle(),this.autoplay()}handle(){this.container.onclick=t=>{var e=t||window.event,i=e.target||e.srcElement;if(i.getAttribute("class")==="prev-arrow"?this.animationCallback({from:this.current,to:this.current-1<0?this.dataLen-1:this.current-1}):i.getAttribute("class")==="next-arrow"&&this.animationCallback({from:this.current,to:this.current+1>this.dataLen-1?0:this.current+1}),i.getAttribute("class")==="dot"){const r=i.getAttribute("data-index");this.animationCallback({from:this.current,to:parseInt(r)})}},u.bind(this.container,"mouseover",()=>{clearInterval(this.timer)}),u.bind(this.container,"mouseleave",()=>{this.autoplay&&this.autoplay()})}content(){var t="";for(let e=0,i=this.data.length;e<i;e++)t+=`<li class="control-li" style=${"width:"+this.fullWidth+"px"}>
                <img src=${f[e]} />
               </li>`;this.container.innerHTML+=`<div class='control-content' style=${"width:"+this.dataLen*this.fullWidth+"px"}><ul>${t}</ul> </div>`}SteeringWheel(){this.container.innerHTML+="<div class='control-btn'><button class='prev-arrow'></button><button class='next-arrow'></button></div>"}dotInit(){let t="";for(let e=0,i=this.data.length;e<i;e++)t+=`<li class="dot" data-index=${e}>
            <div class="process"><div/>
            </li>`;this.container.innerHTML+=" <div class='control-dot'><ul>"+t+"</ul></div>",this.index_style(0)}autoplay(){this.timer=setInterval(()=>{this.animationCallback({from:this.current,to:this.current+1>this.dataLen-1?0:this.current+1})},5e3)}index_style(t){const e=this.container.querySelectorAll(".dot");for(var i=0,r=this.dataLen;i<r;i++)e[i].setAttribute("class","dot");e[t].setAttribute("class","dot active")}animationCallback(t){this.current=t.to;const e=-(t.from*this.fullWidth);this.offsetLeft=-t.to*this.fullWidth;const i=e>this.offsetLeft?-1:1,r=this.offsetLeft-e;this.index_style(t.to),this.effect(e,i,r)}effect(t,e,i){const r=this.container.querySelector(".control-content");var o=0,l=50;const h=()=>{o++;var c=p.Cubic.easeInOut(o,0,i,l);m(c),o<l?d=requestAnimationFrame(h):window.cancelAnimationFrame(d)};var d=requestAnimationFrame(h);const m=c=>{r.style.transform="translate3d("+(t+e*Math.abs(c))+"px,0,0 )"}}}function L(n){const t="id";return g.useEffect(()=>{new b({id:t,props:n})},[t]),s.jsx(s.Fragment,{children:s.jsx("div",{id:t,className:"carousel-container"})})}function w(){return s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"text-6xl",children:"Carousel 走马灯"}),s.jsx("p",{children:"走马灯一组轮播的效果。"}),s.jsx("h2",{className:"text-5xl",children:"API"}),s.jsx("code",{children:`
          <Carousel data=[] time=5 ... />
        `}),s.jsx("h3",{className:"text-4xl",children:"演示"}),s.jsx(L,{})]})}export{w as default};
