var u=Object.defineProperty;var l=(n,t,e)=>t in n?u(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>l(n,typeof t!="symbol"?t+"":t,e);import{r as h,j as i}from"./index-XDL_Jtnr.js";class f{constructor(t){s(this,"container");s(this,"refresh");s(this,"startX");s(this,"startY");s(this,"state");s(this,"isTouch");s(this,"getX",t=>t.targetTouches?t.targetTouches[0].clientX:t.clientX);s(this,"getY",t=>t.targetTouches?t.targetTouches[0].clientY:t.clientY);s(this,"start",t=>{this.container.scrollTop||(this.startY=this.getY(t),this.container.addEventListener(this.isTouch?"touchmove":"mousemove",this.move),document.addEventListener(this.isTouch?"touchend":"mouseup",this.end))});s(this,"move",t=>{const e=this,o=this.getY(t)-this.startY;console.log("🚀 ~ PullRefresh ~ scrollTop:",o);function c(a,r){r>100?r<200?e.refresh.innerHTML="下拉刷新"+r:(e.refresh.innerHTML="松开刷新",e.state=!0):e.refresh.innerHTML="",e.refresh.style.height=(r>>1)+"px",a.style.transform=`translate3d(0,${r>>1}px,0)`,a.style.transition="none"}c(this.container,o)});s(this,"end",()=>{const t=this;this.container.removeEventListener(this.isTouch?"touchmove":"mousemove",this.move),document.removeEventListener(this.isTouch?"touchend":"mouseup",this.end);function e(){t.refresh.innerHTML="",t.refresh.style.height="0px",t.refresh.style.transition="height .5s",t.container.style.transform="translate3d(0,0,0)",t.container.style.transition="all .5s",setTimeout(()=>{t.refresh.style.transition="",t.state&&(t.state=!1)},400)}e()});this.container=t==null?void 0:t.container,this.refresh=t==null?void 0:t.refresh,this.startX=0,this.startY=0,this.state=!1,this.isTouch="ontouchend"in document,this.container.addEventListener(this.isTouch?"touchstart":"mousedown",this.start)}}function m(){const n=h.useRef(null),t=h.useRef(null);return h.useEffect(()=>{new f({container:n.current,refresh:t.current})},[]),i.jsx(i.Fragment,{children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx("div",{ref:t,className:"absolute z-10 w-full bg-zinc-200 text-center"}),i.jsx("div",{ref:n,className:"relative m-auto h-96 w-40 bg-zinc-400"})]})})}function g(){return i.jsx(i.Fragment,{children:i.jsx(m,{})})}export{g as default};
